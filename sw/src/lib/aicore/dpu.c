// (C) Copyright Axelera AI 2024
// All Rights Reserved
// *** Axelera AI Confidential ***

// THIS FILE IS AUTOMATICALLY GENERATED. DO NOT MODIFY.
// Use the "blueprint-engine" to regenerate this file.

/* clang-format off */

//==================================================
// INCLUDES
//==================================================

#include "dpu.h"

#include "module.h"

//==================================================
// MACROS
//==================================================

//==================================================
// DEFINITIONS
//==================================================

//==================================================
// TYPES
//==================================================

//--------------------------------------------------
// CSRs
//--------------------------------------------------

// Registers
//--------------------------------------------------

typedef __attribute__((aligned(sizeof(uint64_t)))) struct {
  uint64_t exec_en : 1;
  uint64_t ptr_rst : 1;
  uint64_t __reserved_2__ : 62;
} csr_register_cmdblk_ctrl_t;

typedef __attribute__((aligned(sizeof(uint64_t)))) struct {
  uint64_t state : 2;
  uint64_t wait_token : 1;
  uint64_t __reserved_2__ : 5;
  uint64_t in_word_ptr : 8;
  uint64_t fifo_cnt : 8;
  uint64_t outst_cmds : 8;
  uint64_t pending_tokens : 16;
  uint64_t __reserved_7__ : 16;
} csr_register_cmdblk_status_t;

typedef __attribute__((aligned(sizeof(uint64_t)))) struct {
  uint64_t err_act_stream_in0 : 1;
  uint64_t err_act_stream_in1 : 1;
  uint64_t err_act_stream_out : 1;
  uint64_t err_illegal_format : 1;
  uint64_t err_empty_program : 1;
  uint64_t err_init_segfault : 1;
  uint64_t err_loop_segfault : 1;
  uint64_t err_i0_termination : 1;
  uint64_t err_i1_termination : 1;
  uint64_t err_id_illegal_instr : 1;
  uint64_t err_i0_of : 1;
  uint64_t err_i0_uf : 1;
  uint64_t err_i0_nx : 1;
  uint64_t err_i1_of : 1;
  uint64_t err_i1_uf : 1;
  uint64_t err_i1_nx : 1;
  uint64_t err_madd_op_of : 1;
  uint64_t err_madd_op_uf : 1;
  uint64_t err_madd_op_nx : 1;
  uint64_t err_madd_op_nv : 1;
  uint64_t err_sumr_op_of : 1;
  uint64_t err_sumr_op_nx : 1;
  uint64_t err_sumr_op_nv : 1;
  uint64_t err_o_of : 1;
  uint64_t err_o_uf : 1;
  uint64_t err_o_nx : 1;
  uint64_t __reserved_26__ : 6;
  uint64_t dbg_sw_interrupt : 1;
  uint64_t __reserved_28__ : 7;
  uint64_t cmdblk_cmd_dropped : 1;
  uint64_t __reserved_30__ : 23;
} csr_register_irq_en_t;

typedef __attribute__((aligned(sizeof(uint64_t)))) struct {
  uint64_t err_act_stream_in0 : 1;
  uint64_t err_act_stream_in1 : 1;
  uint64_t err_act_stream_out : 1;
  uint64_t err_illegal_format : 1;
  uint64_t err_empty_program : 1;
  uint64_t err_init_segfault : 1;
  uint64_t err_loop_segfault : 1;
  uint64_t err_i0_termination : 1;
  uint64_t err_i1_termination : 1;
  uint64_t err_id_illegal_instr : 1;
  uint64_t err_i0_of : 1;
  uint64_t err_i0_uf : 1;
  uint64_t err_i0_nx : 1;
  uint64_t err_i1_of : 1;
  uint64_t err_i1_uf : 1;
  uint64_t err_i1_nx : 1;
  uint64_t err_madd_op_of : 1;
  uint64_t err_madd_op_uf : 1;
  uint64_t err_madd_op_nx : 1;
  uint64_t err_madd_op_nv : 1;
  uint64_t err_sumr_op_of : 1;
  uint64_t err_sumr_op_nx : 1;
  uint64_t err_sumr_op_nv : 1;
  uint64_t err_o_of : 1;
  uint64_t err_o_uf : 1;
  uint64_t err_o_nx : 1;
  uint64_t __reserved_26__ : 6;
  uint64_t dbg_sw_interrupt : 1;
  uint64_t __reserved_28__ : 7;
  uint64_t cmdblk_cmd_dropped : 1;
  uint64_t __reserved_30__ : 23;
} csr_register_irq_status_t;

typedef __attribute__((aligned(sizeof(uint64_t)))) struct {
  uint64_t i0_int_sgn : 1;
  uint64_t i1_int_sgn : 1;
  uint64_t out_int_sgn : 1;
  uint64_t skip_illegal_prog : 1;
  uint64_t drop_illegal_instr : 1;
  uint64_t __reserved_5__ : 27;
  uint64_t dbg_sw_irq : 1;
  uint64_t __reserved_7__ : 31;
} csr_register_dp_ctrl_t;

typedef __attribute__((aligned(sizeof(uint64_t)))) struct {
  uint64_t in0_vld : 1;
  uint64_t in0_rdy : 1;
  uint64_t in0_lst : 1;
  uint64_t in0_stl : 1;
  uint64_t in1_vld : 1;
  uint64_t in1_rdy : 1;
  uint64_t in1_lst : 1;
  uint64_t in1_stl : 1;
  uint64_t out_vld : 1;
  uint64_t out_rdy : 1;
  uint64_t out_lst : 1;
  uint64_t out_stl : 1;
  uint64_t __reserved_12__ : 4;
  uint64_t dpcmd0_vld : 1;
  uint64_t dpcmd0_rdy : 1;
  uint64_t dpcmd0_lst : 1;
  uint64_t dpcmd0_stl : 1;
  uint64_t __reserved_17__ : 12;
  uint64_t id_current_op : 4;
  uint64_t id_disp_i_stalled : 1;
  uint64_t id_disp_a_stalled : 1;
  uint64_t id_disp_b_stalled : 1;
  uint64_t id_disp_c_stalled : 1;
  uint64_t id_waw_stalled : 1;
  uint64_t id_iss_stalled : 1;
  uint64_t iss_i0_stalled : 1;
  uint64_t iss_i1_stalled : 1;
  uint64_t iss_a_stalled : 1;
  uint64_t iss_b_stalled : 1;
  uint64_t iss_c_stalled : 1;
  uint64_t iss_order_stalled : 1;
  uint64_t iss_done_stalled : 1;
  uint64_t iss_exe_stalled : 1;
  uint64_t exe_lut_in_flt : 1;
  uint64_t exe_madd_in_flt : 1;
  uint64_t exe_max_in_flt : 1;
  uint64_t exe_maxr_in_flt : 1;
  uint64_t exe_sumr_in_flt : 1;
  uint64_t exe_mv_in_flt : 1;
  uint64_t exe_num_in_flt_ostr_ops : 3;
  uint64_t exe_wb_stalled : 1;
  uint64_t wb_o_write : 1;
  uint64_t wb_a_write : 1;
  uint64_t wb_b_write : 1;
  uint64_t wb_c_write : 1;
} csr_register_dp_status_t;

typedef __attribute__((aligned(sizeof(uint64_t)))) struct {
  uint64_t in0_vld : 1;
  uint64_t in0_rdy : 1;
  uint64_t in0_lst : 1;
  uint64_t __reserved_3__ : 1;
  uint64_t in1_vld : 1;
  uint64_t in1_rdy : 1;
  uint64_t in1_lst : 1;
  uint64_t __reserved_7__ : 1;
  uint64_t out_vld : 1;
  uint64_t out_rdy : 1;
  uint64_t out_lst : 1;
  uint64_t __reserved_11__ : 5;
  uint64_t dpcmd0_vld : 1;
  uint64_t dpcmd0_rdy : 1;
  uint64_t dpcmd0_lst : 1;
  uint64_t __reserved_15__ : 45;
} csr_register_dbg_observe_t;

typedef __attribute__((aligned(sizeof(uint64_t)))) struct {
  uint64_t iteration_cnt : 32;
  uint64_t program_cnt : 16;
  uint64_t fsm_state : 2;
  uint64_t __reserved_3__ : 14;
} csr_register_cmdgen_status_t;

typedef __attribute__((aligned(sizeof(uint64_t)))) struct {
  uint64_t scratch : 64;
} csr_register_dbg_scratch_t;

typedef __attribute__((aligned(sizeof(uint64_t)))) struct {
  uint64_t block_id : 8;
  uint64_t ai_core_id : 8;
  uint64_t hw_revision : 8;
  uint64_t __reserved_3__ : 40;
} csr_register_dbg_id_t;

typedef __attribute__((aligned(sizeof(uint64_t)))) struct {
  uint64_t cmd_fifo_depth : 8;
  uint64_t __reserved_1__ : 8;
  uint64_t instr_mem_depth : 16;
  uint64_t __reserved_3__ : 32;
} csr_register_hw_capability_t;

typedef __attribute__((aligned(sizeof(uint64_t)))) struct {
  uint64_t busy_state_en : 1;
  uint64_t idle_state_en : 1;
  uint64_t io_stall_en : 1;
  uint64_t token_stall_en : 1;
  uint64_t in0_stall_en : 1;
  uint64_t in1_stall_en : 1;
  uint64_t out_stall_en : 1;
  uint64_t __reserved_7__ : 57;
} csr_register_perf_ctrl_t;

typedef __attribute__((aligned(sizeof(uint64_t)))) struct {
  uint64_t busy_state_cnt : 32;
  uint64_t idle_state_cnt : 32;
} csr_register_perf_state_t;

typedef __attribute__((aligned(sizeof(uint64_t)))) struct {
  uint64_t io_stall_cnt : 32;
  uint64_t token_stall_cnt : 32;
} csr_register_perf_stall_t;

typedef __attribute__((aligned(sizeof(uint64_t)))) struct {
  uint64_t in0_stall_cnt : 32;
  uint64_t in1_stall_cnt : 32;
} csr_register_perf_stall_in_t;

typedef __attribute__((aligned(sizeof(uint64_t)))) struct {
  uint64_t out_stall_cnt : 32;
  uint64_t __reserved_1__ : 32;
} csr_register_perf_stall_out_t;

// CSR
//--------------------------------------------------

typedef __attribute__((aligned(sizeof(uint64_t)))) struct {
  csr_register_cmdblk_ctrl_t cmdblk_ctrl;
  csr_register_cmdblk_status_t cmdblk_status;
  csr_register_irq_en_t irq_en;
  csr_register_irq_status_t irq_status;
  csr_register_dp_ctrl_t dp_ctrl;
  csr_register_dp_status_t dp_status;
  csr_register_dbg_observe_t dbg_observe;
  csr_register_cmdgen_status_t cmdgen_status;
  csr_register_dbg_scratch_t dbg_scratch;
  csr_register_dbg_id_t dbg_id;
  csr_register_hw_capability_t hw_capability;
  csr_register_perf_ctrl_t perf_ctrl;
  csr_register_perf_state_t perf_state;
  csr_register_perf_stall_t perf_stall;
  csr_register_perf_stall_in_t perf_stall_in;
  csr_register_perf_stall_out_t perf_stall_out;
} csr_t;

//==================================================
// DATA
//==================================================

//==================================================
// LOCAL FUNCTION DECLARATIONS
//==================================================

//==================================================
// LOCAL FUNCTION DEFINITIONS
//==================================================

//==================================================
// GLOBAL FUNCTION DEFINITIONS
//==================================================

inline dpu_status_t dpu_init(void) {
  return (dpu_status_t) module_init();
}

inline dpu_status_t dpu_enable_execution(dpu_id_t dpu_id) {
  return (dpu_status_t) module_enable_execution((module_id_t) dpu_id);
}

inline dpu_status_t dpu_disable_execution(dpu_id_t dpu_id) {
  return (dpu_status_t) module_disable_execution((module_id_t) dpu_id);
}

inline dpu_status_t dpu_poll_idle(dpu_id_t dpu_id) {
  return (dpu_status_t) module_poll_idle((module_id_t) dpu_id);
}

inline dpu_status_t dpu_load_command(dpu_id_t dpu_id, dpu_command_t* command) {
  return (dpu_status_t) module_load_command((module_id_t) dpu_id, (module_command_t*) command);
}

inline dpu_status_t dpu_load_instructions(dpu_id_t dpu_id, dpu_instruction_t instructions[], uint16_t count, uint16_t offset) {
  return (dpu_status_t) module_load_instructions((module_id_t) dpu_id, (void*) instructions, count, offset);
}
