#!/usr/bin/env bash

set -e

VENV=.venv/fw_trace_utils

make -C $REPO_ROOT/bin venv VENV=$VENV FILE=$REPO_ROOT/sw/scripts/fw_trace_utils/requirements.txt > /dev/null 2>&1

source $REPO_ROOT/bin/$VENV/bin/activate
$REPO_ROOT/sw/scripts/fw_trace_utils/fw_trace_utils.py $@
deactivate

# When running in parallel the terminal can get confused
if [ -t 0 ] ; then
  stty sane
fi
