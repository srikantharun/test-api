tests:
  - name: test_soc_periph_axi_tb
    description: "Pure-UVM test that stresses SOC_PERIPH AXI bus with all types of bursts"
    requirement_ids: [SOC_PERIPH_FEAT_7, SOC_PERIPH_FEAT_9, TOP_SOC_PERIPH_FEAT_7]
    labels: [SOC_PERIPH_NIGHTLY]
    platforms: [uvm.SIM_SOC_PERIPH_AXI]
    repeat_count: 10
    seeds: [1]
    flags: ["UVM_VERBOSITY=UVM_LOW", +NB_THREADS=2, +TX_COUNT=1000]
    owner: Jerome Sauger

  - name: test_soc_periph_spi_interrupts
    description: "Verify that SPI interrupts are correctly connected to the APU"
    requirement_ids: [TOP_SOC_PERIPH_FEAT_SPI_0, TOP_SOC_PERIPH_FEAT_12, SOC_PERIPH_FEAT_11]
    labels: [SIM_TOP_LIGHT_NIGHTLY, VELOCE_TOP_LIGHT_NIGHTLY]
    platforms: [top.*]
    flags: []
    owner: Jerome Sauger
    apu: [test_spi/apu/test_spi_interrupts.c]

  - name: test_soc_periph_spinor_preload
    description: "Verify that SPINOR softmodel can be preloaded and accessed"
    requirement_ids: [TOP_SOC_PERIPH_FEAT_SPI_0, SOC_PERIPH_FEAT_SPI_0]
    labels: [SIM_TOP_LIGHT_NIGHTLY, VELOCE_TOP_LIGHT_NIGHTLY]
    platforms: [top.*]
    flags: [+SPINOR_MEMFILE=$REPO_ROOT/sw/src/tests/test_spi/apu/spi_flash_image.byte]
    owner: Jerome Sauger
    apu: [test_spi/apu/test_spinor_preload.c]

  - name: test_soc_periph_spi_quad
    description: "Test that SPI interface can perform read and writes in quad mode to a slave. Different flavours of flash shall be tested."
    requirement_ids: [SOC_PERIPH_FEAT_SPI_0]
    labels: [TODO]
    platforms: [top.SIM_SOC_PERIPH_SPIKE]
    owner: Jerome Sauger

  - name: test_soc_periph_i2c_master_sm
    description: "Test both I2C interfaces can communicate as master in standard mode."
    requirement_ids: [TOP_SOC_PERIPH_FEAT_I2C_1,  SOC_PERIPH_FEAT_I2C_1,  SOC_PERIPH_FEAT_14,SOC_PERIPH_FEAT_15]
    labels: [SOC_PERIPH_NIGHTLY]
    platforms: [top.SIM_SOC_PERIPH_SPIKE]
    apu: [test_soc_periph_i2c/apu/test_soc_periph_i2c_master.c]
    owner: Jerome Sauger

  - name: test_soc_periph_i2c_master_interrupts
    description: "Verifies that master I2C interrupts are correctly connected to the APU"
    requirement_ids: [SOC_PERIPH_FEAT_11, TOP_SOC_PERIPH_FEAT_12]
    # FIXME: On mini-top, soc_periph clock is driven at 20Mhz, which is too slow for I2C
    # Since we don't do actual transfers, we fake the clock frequency to 100Mhz
    flags: [-DCLK_SOC_PERIPH_Hz=100000000]
    labels: [SIM_TOP_LIGHT_NIGHTLY, VELOCE_TOP_LIGHT_NIGHTLY]
    platforms: [top.*]
    apu: [test_soc_periph_i2c/apu/test_soc_periph_i2c_interrupts_master.c]
    owner: Jerome Sauger

  - name: test_soc_periph_i2c_master_fm
    description: "Test both I2C interfaces can communicate as master in fast mode"
    requirement_ids: [SOC_PERIPH_FEAT_15]
    labels: [TODO]
    platforms: [top.SIM_SOC_PERIPH_SPIKE]
    owner: Jerome Sauger

  - name: test_soc_periph_i2c_master_hm
    description: "Test both I2C interfaces can communicate as master in high-speed mode."
    requirement_ids: [SOC_PERIPH_FEAT_15]
    labels: [TODO]
    platforms: [top.SIM_SOC_PERIPH_SPIKE]
    owner: Jerome Sauger

  - name: test_soc_periph_i2c_slave_sm
    description: "Test both I2C interfaces can communicate as slave in standard mode and that RD_REQ and GEN_CALL interrupts are connected correctly"
    requirement_ids: [SOC_PERIPH_FEAT_14,SOC_PERIPH_FEAT_15, SOC_PERIPH_FEAT_11, TOP_SOC_PERIPH_FEAT_12]
    labels: [SOC_PERIPH_NIGHTLY]
    platforms: [top.SIM_SOC_PERIPH_SPIKE]
    owner: Jerome Sauger
    apu: [test_soc_periph_i2c/apu/test_soc_periph_i2c_slave.c]

  - name: test_soc_periph_i2c_slave_fm
    description: "Test both I2C interfaces can communicate as slave in fast mode"
    requirement_ids: [SOC_PERIPH_FEAT_15]
    labels: [TODO]
    platforms: [top.SIM_SOC_PERIPH_SPIKE]
    owner: Jerome Sauger

  - name: test_soc_periph_i2c_slave_hm
    description: "Test both I2C interfaces can communicate as slave in high-speed mode"
    requirement_ids: [SOC_PERIPH_FEAT_15]
    labels: [TODO]
    platforms: [top.SIM_SOC_PERIPH_SPIKE]
    owner: Jerome Sauger

  - name: test_soc_periph_uart
    description: "Test that UART can send and receive data, and trigger interrupts."
    requirement_ids: [SOC_PERIPH_FEAT_UART_2, SOC_PERIPH_FEAT_11]
    labels: [SOC_PERIPH_NIGHTLY]
    platforms: [top.SIM_SOC_PERIPH_SPIKE]
    owner: Jerome Sauger
    flags: ["--uvm_testname=uart_test"]
    apu: [test_soc_periph_uart/apu/test.c]

  - name: test_soc_periph_emmc_sd
    description: "Perform a basic EMMC transfer from an internal memory to the EMMC and back at the standard rate"
    requirement_ids: [TOP_SOC_PERIPH_FEAT_EMMC_3, TOP_SOC_PERIPH_FEAT_EMMC_8, SOC_PERIPH_FEAT_EMMC_3, SOC_PERIPH_FEAT_EMMC_8, TOP_SOC_PERIPH_FEAT_12, SOC_PERIPH_FEAT_11]
    labels: [ SIM_TOP_LIGHT_NIGHTLY, VELOCE_TOP_LIGHT_NIGHTLY]
    platforms: [top.*]
    owner: Jerome Sauger
    flags: []
    apu: [test_soc_periph_emmc/apu/test.c]

  - name: test_soc_periph_emmc_preload
    description: "Verify that partition user0 of the EMMC softmodel can be successfully preloaded"
    labels: [ SIM_TOP_LIGHT_NIGHTLY, VELOCE_TOP_LIGHT_NIGHTLY]
    requirement_ids: []
    platforms: [top.*]
    owner: Jerome Sauger
    apu: [test_soc_periph_emmc/apu/test_emmc_softmodel_preload.c]
    flags: ["+EMMC_USER_0_MEM_0_FILE=$REPO_ROOT/sw/src/tests/test_soc_periph_emmc/apu/preload_emmc_user0.hex"]

  - name: test_soc_periph_emmc_hs400
    description: "Perform a basic EMMC transfer from an internal memory to the EMMC and back at high speed."
    requirement_ids: [SOC_PERIPH_FEAT_24, SOC_PERIPH_FEAT_22]
    labels: [TODO]
    platforms: [top.SIM_SOC_PERIPH_SPIKE]
    owner: Jerome Sauger

  - name: test_soc_periph_gpio
    description: "Test that all 16 GPIO pins can be toggled in output mode, and that toggling them in input mode triggers an edge-sensitive interrupt."
    requirement_ids: [SOC_PERIPH_FEAT_GPIO_4, SOC_PERIPH_FEAT_11]
    labels: [SOC_PERIPH_NIGHTLY]
    platforms: [top.SIM_SOC_PERIPH_SPIKE]
    owner: Jerome Sauger
    apu: [test_soc_periph_gpio/apu/test.c]

  - name: test_soc_periph_timers
    description: "Test that both timers are able to count at the expected rate and issue interrupts."
    requirement_ids: [SOC_PERIPH_FEAT_TIMER_6]
    labels: [SOC_PERIPH_NIGHTLY]
    platforms: [top.SIM_SOC_PERIPH_SPIKE]
    owner: Jerome Sauger
    flags: ["--uvm_testname=timer_test"]
    apu: [test_soc_periph_timers/apu/test.c]

  - name: test_soc_periph_syscfg_rw
    description: "Test that PCTL and PADCTRL CSRs can be accessed in R/W"
    requirement_ids: [TOP_SOC_PERIPH_FEAT_11, TOP_SOC_PERIPH_FEAT_PAD_5, SOC_PERIPH_FEAT_PAD_5, SOC_PERIPH_FEAT_10]
    labels: [VELOCE_TOP_LIGHT_NIGHTLY, SIM_TOP_LIGHT_NIGHTLY]
    platforms: [top.SIM_TOP_LIGHT, top.SIM_TOP]
    owner: Jerome Sauger
    apu: [test_soc_periph_syscfg/apu/test.c]

  - name: test_soc_periph_reserved_adresses
    description: "Make R/W accesses from within the reserved part of the address map to make sure SOC_PERIPH responds with a DECERR."
    requirement_ids: []
    labels: [TODO]
    platforms: [uvm.SIM_SOC_PERIPH_AXI]
    owner: Jerome Sauger
