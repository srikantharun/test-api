# (C) Copyright Axelera AI 2024
# All Rights Reserved
# *** Axelera AI Confidential ***
#
# Description: Testlist for CVA6V
# Owner: Pawel Wiecha <pawel.wiecha@axelera.ai>

# ================================================================================
#                  Regression test list format
# --------------------------------------------------------------------------------
# test            : Assembly test name
# description     : Description of this test
# gen_opts        : Instruction generator options
# iterations      : Number of iterations of this test
# no_iss          : Enable/disable ISS simulator (Optional)
# gen_test        : Test name used by the instruction generator
# rtl_test        : RTL simulation test name
# cmp_opts        : Compile options passed to the instruction generator
# sim_opts        : Simulation options passed to the instruction generator
# no_post_compare : Enable/disable comparison of trace log and ISS log (Optional)
# compare_opts    : Options for the RTL & ISS trace comparison
# gcc_opts        : gcc compile options
# --------------------------------------------------------------------------------
# Base + Floating Point
# Tests below are 1:1 with base/ + enable_fp_extension, exclusive are @ EOF
# Supervisor mode mostly
- test: fp
  description: >
    Base ISA + floating point, no load/store/branch instructions
  gen_opts: >
    +instr_cnt=80000
    +boot_mode=s
    +enable_fp_extension=1
    +num_of_sub_program=0
    +no_data_page=1
    +no_branch_jump=1
    +report_stats=1
  iterations: 10
  gen_test: riscv_instr_base_test
  rtl_test: core_base_test

- test: fp_numeric_corner
  description: >
    Base ISA, no load/store/branch instructions
  gen_opts: >
    +instr_cnt=80000
    +boot_mode=s
    +directed_instr_0=riscv_int_numeric_corner_stream,15
    +num_of_sub_program=0
    +no_data_page=1
    +no_branch_jump=1
    +report_stats=1
  iterations: 10
  gen_test: riscv_instr_base_test
  rtl_test: core_base_test

- test: fp_subprograms
  description: >
    Base ISA with subprograms
  gen_opts: >
    +instr_cnt=10000
    +boot_mode=s
    +enable_fp_extension=1
    +num_of_sub_program=20
    +report_stats=1
  iterations: 10
  gen_test: riscv_instr_base_test
  rtl_test: core_base_test

- test: fp_w_illegal
  description: >
    Base ISA w illegal instrs mixed in, 20/1k illegals -> 2k illegals
  gen_opts: >
    +instr_cnt=80000
    +boot_mode=s
    +enable_fp_extension=1
    +num_of_sub_program=0
    +no_data_page=1
    +no_branch_jump=1
    +illegal_instr_ratio=20
    +report_stats=1
  iterations: 10
  gen_test: riscv_instr_base_test
  rtl_test: core_base_test

- test: fp_jump
  description: >
    Base ISA, stress back-to-back jump instructions
  gen_opts: >
    +instr_cnt=80000
    +boot_mode=s
    +enable_fp_extension=1
    +num_of_sub_program=2
    +directed_instr_1=riscv_jal_instr,15
    +report_stats=1
  iterations: 10
  gen_test: riscv_instr_base_test
  rtl_test: core_base_test

- test: fp_loop
  description: >
    Base ISA with loops
  gen_opts: >
    +instr_cnt=80000
    +boot_mode=s
    +enable_fp_extension=1
    +num_of_sub_program=2
    +directed_instr_1=riscv_loop_instr,10
    +report_stats=1
  iterations: 10
  gen_test: riscv_instr_base_test
  rtl_test: core_base_test

- test: fp_ldst_misaligned
  description: >
    Base ISA with misaligned ldst, less instr as trap handlers will add ~4x instrs
  gen_opts: >
    +instr_cnt=20000
    +boot_mode=s
    +enable_fp_extension=1
    +num_of_sub_program=0
    +enable_misaligned_load_store=1
    +no_branch_jump=1
    +directed_instr_0=riscv_load_store_stress_instr_stream,10
    +directed_instr_1=riscv_load_store_rand_instr_stream,10
    +report_stats=1
  iterations: 10
  gen_test: riscv_instr_base_test
  rtl_test: core_base_test

- test: fp_ldst_misaligned2
  description: >
    Base ISA with misaligned ldst, with subprograms and different streams, less instr as trap handlers will add ~4x instrs
  gen_opts: >
    +instr_cnt=15000
    +boot_mode=s
    +enable_fp_extension=1
    +num_of_sub_program=5
    +enable_misaligned_load_store=1
    +no_branch_jump=1
    +directed_instr_0=riscv_load_store_rand_instr_stream,4
    +directed_instr_1=riscv_load_store_hazard_instr_stream,4
    +directed_instr_2=riscv_multi_page_load_store_instr_stream,4
    +directed_instr_3=riscv_mem_region_stress_test,4
    +report_stats=1
  iterations: 10
  gen_test: riscv_instr_base_test
  rtl_test: core_base_test

- test: fp_ldst_machine
  description: >
    Base ISA with all the ldst streams
  gen_opts: >
    +boot_mode=m
    +instr_cnt=70000
    +enable_fp_extension=1
    +num_of_sub_program=0
    +directed_instr_0=riscv_load_store_stress_instr_stream,5
    +directed_instr_1=riscv_load_store_rand_instr_stream,5
    +directed_instr_2=riscv_hazard_instr_stream,5
    +directed_instr_3=riscv_load_store_hazard_instr_stream,5
    +directed_instr_4=riscv_load_store_rand_addr_instr_stream,5
    +directed_instr_5=riscv_multi_page_load_store_instr_stream,5
    +directed_instr_6=riscv_mem_region_stress_test,5
    +report_stats=1
  iterations: 5
  gen_test: riscv_instr_base_test
  rtl_test: core_base_test

- test: fp_ldst_supervisor
  description: >
    Base ISA with all the ldst streams
  gen_opts: >
    +boot_mode=s
    +instr_cnt=70000
    +enable_fp_extension=1
    +num_of_sub_program=0
    +directed_instr_0=riscv_load_store_stress_instr_stream,5
    +directed_instr_1=riscv_load_store_rand_instr_stream,5
    +directed_instr_2=riscv_hazard_instr_stream,5
    +directed_instr_3=riscv_load_store_hazard_instr_stream,5
    +directed_instr_4=riscv_multi_page_load_store_instr_stream,5
    +directed_instr_5=riscv_mem_region_stress_test,5
    +report_stats=1
  iterations: 5
  gen_test: riscv_instr_base_test
  rtl_test: core_base_test

- test: fp_ldst_user
  description: >
    Base ISA with all the ldst streams
  gen_opts: >
    +boot_mode=s
    +instr_cnt=30000
    +enable_fp_extension=1
    +num_of_sub_program=0
    +directed_instr_0=riscv_load_store_stress_instr_stream,5
    +directed_instr_1=riscv_load_store_rand_instr_stream,5
    +directed_instr_2=riscv_hazard_instr_stream,5
    +directed_instr_3=riscv_load_store_hazard_instr_stream,5
    +directed_instr_4=riscv_multi_page_load_store_instr_stream,5
    +directed_instr_5=riscv_mem_region_stress_test,5
    +report_stats=1
  iterations: 5
  gen_test: riscv_instr_base_test
  rtl_test: core_base_test

- test: fp_atomics
  description: >
    Base ISA with atomic streams
  gen_opts: >
    +instr_cnt=80000
    +boot_mode=s
    +enable_fp_extension=1
    +num_of_sub_program=0
    +directed_instr_0=riscv_lr_sc_instr_stream,15
    +directed_instr_1=riscv_amo_instr_stream,15
    +report_stats=1
  iterations: 10
  gen_test: riscv_instr_base_test
  rtl_test: core_base_test

- test: fp_advanced_machine
  description: >
    Base ISA with all the goodies
  gen_opts: >
    +instr_cnt=70000
    +boot_mode=m
    +enable_fp_extension=1
    +num_of_sub_program=0
    +directed_instr_0=riscv_load_store_rand_instr_stream,5
    +directed_instr_1=riscv_loop_instr,5
    +directed_instr_2=riscv_hazard_instr_stream,5
    +directed_instr_3=riscv_load_store_hazard_instr_stream,5
    +directed_instr_4=riscv_multi_page_load_store_instr_stream,5
    +directed_instr_5=riscv_mem_region_stress_test,5
    +directed_instr_6=riscv_jal_instr,5
    +directed_instr_7=riscv_load_store_stress_instr_stream,5
    +directed_instr_8=riscv_load_store_rand_addr_instr_stream,5
    +directed_instr_9=riscv_lr_sc_instr_stream,5
    +directed_instr_10=riscv_amo_instr_stream,5
    +directed_instr_11=riscv_int_numeric_corner_stream,5
    +directed_instr_12=riscv_load_store_word_aligned_hazard_instr_stream,5
    +directed_instr_13=riscv_fpu_arithmetic_stream,5
    +directed_instr_14=riscv_fpu_only_arithmetic_stream,5
    +directed_instr_15=riscv_load_store_w_hazards_rand_instr_stream,5
    +report_stats=1
  iterations: 5
  gen_test: riscv_instr_base_test
  rtl_test: core_base_test

- test: fp_advanced_supervisor
  description: >
    Base ISA with all the goodies
  gen_opts: >
    +instr_cnt=70000
    +boot_mode=s
    +enable_fp_extension=1
    +num_of_sub_program=0
    +directed_instr_0=riscv_load_store_rand_instr_stream,5
    +directed_instr_1=riscv_loop_instr,5
    +directed_instr_2=riscv_hazard_instr_stream,5
    +directed_instr_3=riscv_load_store_hazard_instr_stream,5
    +directed_instr_4=riscv_multi_page_load_store_instr_stream,5
    +directed_instr_5=riscv_mem_region_stress_test,5
    +directed_instr_6=riscv_jal_instr,5
    +directed_instr_7=riscv_load_store_stress_instr_stream,5
    +directed_instr_8=riscv_lr_sc_instr_stream,5
    +directed_instr_9=riscv_amo_instr_stream,5
    +directed_instr_10=riscv_int_numeric_corner_stream,5
    +directed_instr_11=riscv_load_store_word_aligned_hazard_instr_stream,5
    +directed_instr_12=riscv_fpu_arithmetic_stream,5
    +directed_instr_13=riscv_fpu_only_arithmetic_stream,5
    +report_stats=1
  iterations: 5
  gen_test: riscv_instr_base_test
  rtl_test: core_base_test

# CSRs instrs will trap a LOT in U mode
- test: fp_advanced_user
  description: >
    Base ISA with all the goodies
  gen_opts: >
    +instr_cnt=20000
    +boot_mode=u
    +enable_fp_extension=1
    +num_of_sub_program=0
    +directed_instr_0=riscv_load_store_rand_instr_stream,5
    +directed_instr_1=riscv_loop_instr,5
    +directed_instr_2=riscv_hazard_instr_stream,5
    +directed_instr_3=riscv_load_store_hazard_instr_stream,5
    +directed_instr_4=riscv_multi_page_load_store_instr_stream,5
    +directed_instr_5=riscv_mem_region_stress_test,5
    +directed_instr_6=riscv_jal_instr,5
    +directed_instr_7=riscv_load_store_stress_instr_stream,5
    +directed_instr_8=riscv_lr_sc_instr_stream,5
    +directed_instr_9=riscv_amo_instr_stream,5
    +directed_instr_10=riscv_int_numeric_corner_stream,5
    +directed_instr_11=riscv_load_store_word_aligned_hazard_instr_stream,5
    +directed_instr_12=riscv_fpu_arithmetic_stream,5
    +directed_instr_13=riscv_fpu_only_arithmetic_stream,5
    +report_stats=1
  iterations: 5
  gen_test: riscv_instr_base_test
  rtl_test: core_base_test

# Tests below are fp exclusive
- test: fp_ldst_wordaligned
  description: >
    Base ISA with all the ldst streams
  gen_opts: >
    +instr_cnt=70000
    +boot_mode=s
    +enable_fp_extension=1
    +num_of_sub_program=0
    +directed_instr_1=riscv_load_store_word_aligned_hazard_instr_stream,15
    +directed_instr_2=riscv_multi_page_load_store_instr_stream,15
    +report_stats=1
  iterations: 20
  gen_test: riscv_instr_base_test
  rtl_test: core_base_test

- test: fp_arith
  description: >
    Base ISA + floating point, FPU arithmetic stress
  gen_opts: >
    +instr_cnt=50000
    +boot_mode=s
    +enable_fp_extension=1
    +num_of_sub_program=0
    +directed_instr_0=riscv_fpu_arithmetic_stream,20
    +directed_instr_1=riscv_fpu_only_arithmetic_stream,20
    +no_data_page=1
    +no_branch_jump=1
    +report_stats=1
  iterations: 20
  gen_test: riscv_instr_base_test
  rtl_test: core_base_test
